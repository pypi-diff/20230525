# Comparing `tmp/einsum_pipe-0.3.0.tar.gz` & `tmp/einsum_pipe-0.3.1.tar.gz`

## Comparing `einsum_pipe-0.3.0.tar` & `einsum_pipe-0.3.1.tar`

### file list

```diff
@@ -1,16 +1,16 @@
--rw-r--r--   0        0        0       37 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/.pytest_cache/.gitignore
--rw-r--r--   0        0        0      191 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/.pytest_cache/CACHEDIR.TAG
--rw-r--r--   0        0        0      302 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/.pytest_cache/README.md
--rw-r--r--   0        0        0        2 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/.pytest_cache/v/cache/stepwise
--rw-r--r--   0        0        0      147 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/.vscode/settings.json
--rw-r--r--   0        0        0      110 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/src/einsum_pipe/__init__.py
--rw-r--r--   0        0        0     6261 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/src/einsum_pipe/einsum_pipe.py
--rw-r--r--   0        0        0    10441 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/src/einsum_pipe/einsum_script.py
--rw-r--r--   0        0        0     3863 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/src/einsum_pipe/ops.py
--rw-r--r--   0        0        0     4535 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/tests/test_einsum_pipe.py
--rw-r--r--   0        0        0     1233 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/tests/test_ops.py
--rw-r--r--   0        0        0       26 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/.gitignore
--rw-r--r--   0        0        0     1074 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/LICENSE
--rw-r--r--   0        0        0     4991 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/README.md
--rw-r--r--   0        0        0      638 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/pyproject.toml
--rw-r--r--   0        0        0     5568 2020-02-02 00:00:00.000000 einsum_pipe-0.3.0/PKG-INFO
+-rw-r--r--   0        0        0       37 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/.pytest_cache/.gitignore
+-rw-r--r--   0        0        0      191 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/.pytest_cache/CACHEDIR.TAG
+-rw-r--r--   0        0        0      302 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/.pytest_cache/README.md
+-rw-r--r--   0        0        0        2 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/.pytest_cache/v/cache/stepwise
+-rw-r--r--   0        0        0      147 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/.vscode/settings.json
+-rw-r--r--   0        0        0      110 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/src/einsum_pipe/__init__.py
+-rw-r--r--   0        0        0     6261 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/src/einsum_pipe/einsum_pipe.py
+-rw-r--r--   0        0        0    10441 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/src/einsum_pipe/einsum_script.py
+-rw-r--r--   0        0        0     3863 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/src/einsum_pipe/ops.py
+-rw-r--r--   0        0        0     4535 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/tests/test_einsum_pipe.py
+-rw-r--r--   0        0        0     1233 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/tests/test_ops.py
+-rw-r--r--   0        0        0       26 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/.gitignore
+-rw-r--r--   0        0        0     1074 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/LICENSE
+-rw-r--r--   0        0        0     5378 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/README.md
+-rw-r--r--   0        0        0      638 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/pyproject.toml
+-rw-r--r--   0        0        0     5955 2020-02-02 00:00:00.000000 einsum_pipe-0.3.1/PKG-INFO
```

### Comparing `einsum_pipe-0.3.0/src/einsum_pipe/einsum_pipe.py` & `einsum_pipe-0.3.1/src/einsum_pipe/einsum_pipe.py`

 * *Files identical despite different names*

### Comparing `einsum_pipe-0.3.0/src/einsum_pipe/einsum_script.py` & `einsum_pipe-0.3.1/src/einsum_pipe/einsum_script.py`

 * *Files identical despite different names*

### Comparing `einsum_pipe-0.3.0/src/einsum_pipe/ops.py` & `einsum_pipe-0.3.1/src/einsum_pipe/ops.py`

 * *Files identical despite different names*

### Comparing `einsum_pipe-0.3.0/tests/test_einsum_pipe.py` & `einsum_pipe-0.3.1/tests/test_einsum_pipe.py`

 * *Files identical despite different names*

### Comparing `einsum_pipe-0.3.0/tests/test_ops.py` & `einsum_pipe-0.3.1/tests/test_ops.py`

 * *Files identical despite different names*

### Comparing `einsum_pipe-0.3.0/LICENSE` & `einsum_pipe-0.3.1/LICENSE`

 * *Files identical despite different names*

### Comparing `einsum_pipe-0.3.0/README.md` & `einsum_pipe-0.3.1/README.md`

 * *Files 8% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 # Einsum Pipe
 
-A Python package to compile multiple Numpy [einsum](https://numpy.org/doc/stable/reference/generated/numpy.einsum.html) operations into one.
+A Python package to compile multiple Numpy [einsum](https://numpy.org/doc/stable/reference/generated/numpy.einsum.html) operations into one. While this package produces strings which are compatible with the default `np.einsum`, it actually uses [opt_einsum](https://dgasmith.github.io/opt_einsum/) as this is significantly faster.
 
 ## Installation
 
 The package is available on PyPi:
 
 ```
 pip install einsum_pipe
@@ -36,29 +36,29 @@
     'abcde fghij klmno pqrst...->cde fghij mno pqrst ab kl...',
     [256, 256, 4, 4, 10, 5],
     'ii...',
     A, B
 )
 ```
 
-Internally, this calculates a compatible input shape, `(4, 8, 4, 8, 50)` and `(32, 32, 50)`, and a combined `np.einsum` set of subscripts, `"ebdbc,aac->edc"`. `A` and `B` are reshaped (which is frequently free), the single `np.einsum` operation is run, and the output is reshaped back to the expected output shape.
+Internally, this calculates a compatible input shape, `(4, 8, 4, 8, 50)` and `(32, 32, 50)`, and a combined `np.einsum` set of subscripts, `"ebdbc,aac->edc"`. `A` and `B` are reshaped (which is frequently free), the single `np.einsum` (or `opt_einsum.contract` in practice) operation is run, and the output is reshaped back to the expected output shape.
 
 You can find further examples in the "tests" folder.
 
 ## Syntax
 
 The syntax is based on Numpy's `einsum`, with the addition of allowing multiple subscripts and defining the shapes of the intermediate arrays. The input arrays can be put at the end, as shown, or next to the subscript definitions. In this example, only two arrays are used at start of the pipe, however you can add more arrays at later stages. The output of the previous step is always considered the first input of the subsequent step.
 
 ## Shape Compatibility
 
 Shapes are compatible if each dimension is the product of some subsequence of a matching shape (of the previous output). For example, `(32, 32)` and `(4, 256)` are compatible, since both can be built from the shape `(4, 8, 4, 8)`: `(4*8, 4*8)` and `(4, 8*4*8)`. On the other hand, `(2, 3)` and `(3, 2)` aren't directly compatible since they don't share divisors.
 
 Note that transposition of axes also causes the transposition of the compatible shape, so while `[(3, 2), 'ij->ij', (2, 3)]` isn't valid, `[(3, 2), 'ij->ji', (2, 3)]` is.
 
-I plan to implement a "best effort" fallback which would reduce a sequence of operations to as few operations as possible, depending on incompatible shapes.
+If a series of steps are incompatible, `einsum_pipe` will reduce it down to the fewest number of steps possible and optimise for the smallest intermediate array size. This isn't guaranteed to be the absolute optimum since calling this function recursively could reduce it further, but this probably isn't worth it.
 
 ## Subscript Simplification
 
 In order to merge multiple subscript steps with different intermediate shapes, the input arrays must be reshaped to be compatible with all steps. However, after merging multiple subscripts, certain complex shapes may be eliminated. While it makes no difference to the performance of the operations, the actual subscript string passed to `np.einsum` can be unnecessarily long. This may even be an issue if there are more axes than available letters.
 
 `einsum_pipe` includes the `simplify` argument to deal with such cases. This can be set to `False` to disable simplification or `"max"` to reduce the length of the subscripts as much as possible. However, this isn't always advisable as merging smaller axes into a larger axis can force an array copy during the initial `reshape` if the input array has been transposed (more on that [here](https://stackoverflow.com/a/60389152/11057932)). Splitting an axis should never cause a problem. The default argument (`True`) simplifies the subscript as much as possible while maintaining the splits from the original input arrays. If your inputs are contiguous, you can safely use `"max"`.
```

### Comparing `einsum_pipe-0.3.0/pyproject.toml` & `einsum_pipe-0.3.1/pyproject.toml`

 * *Files 1% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 [build-system]
 requires = ["hatchling"]
 build-backend = "hatchling.build"
 
 [project]
 name = "einsum_pipe"
-version = "0.3.0"
+version = "0.3.1"
 authors = [
   { name="David Armstrong" },
 ]
 description = "A Python package to compile multiple Numpy einsum operations into one"
 readme = "README.md"
 requires-python = ">=3.7"
 classifiers = [
```

### Comparing `einsum_pipe-0.3.0/PKG-INFO` & `einsum_pipe-0.3.1/PKG-INFO`

 * *Files 11% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: einsum_pipe
-Version: 0.3.0
+Version: 0.3.1
 Summary: A Python package to compile multiple Numpy einsum operations into one
 Project-URL: Homepage, https://github.com/davystrong/Einsum-Pipe
 Project-URL: Bug Tracker, https://github.com/davystrong/Einsum-Pipe/issues
 Author: David Armstrong
 License-File: LICENSE
 Classifier: License :: OSI Approved :: MIT License
 Classifier: Operating System :: OS Independent
@@ -12,15 +12,15 @@
 Requires-Python: >=3.7
 Requires-Dist: numpy
 Requires-Dist: opt-einsum
 Description-Content-Type: text/markdown
 
 # Einsum Pipe
 
-A Python package to compile multiple Numpy [einsum](https://numpy.org/doc/stable/reference/generated/numpy.einsum.html) operations into one.
+A Python package to compile multiple Numpy [einsum](https://numpy.org/doc/stable/reference/generated/numpy.einsum.html) operations into one. While this package produces strings which are compatible with the default `np.einsum`, it actually uses [opt_einsum](https://dgasmith.github.io/opt_einsum/) as this is significantly faster.
 
 ## Installation
 
 The package is available on PyPi:
 
 ```
 pip install einsum_pipe
@@ -52,29 +52,29 @@
     'abcde fghij klmno pqrst...->cde fghij mno pqrst ab kl...',
     [256, 256, 4, 4, 10, 5],
     'ii...',
     A, B
 )
 ```
 
-Internally, this calculates a compatible input shape, `(4, 8, 4, 8, 50)` and `(32, 32, 50)`, and a combined `np.einsum` set of subscripts, `"ebdbc,aac->edc"`. `A` and `B` are reshaped (which is frequently free), the single `np.einsum` operation is run, and the output is reshaped back to the expected output shape.
+Internally, this calculates a compatible input shape, `(4, 8, 4, 8, 50)` and `(32, 32, 50)`, and a combined `np.einsum` set of subscripts, `"ebdbc,aac->edc"`. `A` and `B` are reshaped (which is frequently free), the single `np.einsum` (or `opt_einsum.contract` in practice) operation is run, and the output is reshaped back to the expected output shape.
 
 You can find further examples in the "tests" folder.
 
 ## Syntax
 
 The syntax is based on Numpy's `einsum`, with the addition of allowing multiple subscripts and defining the shapes of the intermediate arrays. The input arrays can be put at the end, as shown, or next to the subscript definitions. In this example, only two arrays are used at start of the pipe, however you can add more arrays at later stages. The output of the previous step is always considered the first input of the subsequent step.
 
 ## Shape Compatibility
 
 Shapes are compatible if each dimension is the product of some subsequence of a matching shape (of the previous output). For example, `(32, 32)` and `(4, 256)` are compatible, since both can be built from the shape `(4, 8, 4, 8)`: `(4*8, 4*8)` and `(4, 8*4*8)`. On the other hand, `(2, 3)` and `(3, 2)` aren't directly compatible since they don't share divisors.
 
 Note that transposition of axes also causes the transposition of the compatible shape, so while `[(3, 2), 'ij->ij', (2, 3)]` isn't valid, `[(3, 2), 'ij->ji', (2, 3)]` is.
 
-I plan to implement a "best effort" fallback which would reduce a sequence of operations to as few operations as possible, depending on incompatible shapes.
+If a series of steps are incompatible, `einsum_pipe` will reduce it down to the fewest number of steps possible and optimise for the smallest intermediate array size. This isn't guaranteed to be the absolute optimum since calling this function recursively could reduce it further, but this probably isn't worth it.
 
 ## Subscript Simplification
 
 In order to merge multiple subscript steps with different intermediate shapes, the input arrays must be reshaped to be compatible with all steps. However, after merging multiple subscripts, certain complex shapes may be eliminated. While it makes no difference to the performance of the operations, the actual subscript string passed to `np.einsum` can be unnecessarily long. This may even be an issue if there are more axes than available letters.
 
 `einsum_pipe` includes the `simplify` argument to deal with such cases. This can be set to `False` to disable simplification or `"max"` to reduce the length of the subscripts as much as possible. However, this isn't always advisable as merging smaller axes into a larger axis can force an array copy during the initial `reshape` if the input array has been transposed (more on that [here](https://stackoverflow.com/a/60389152/11057932)). Splitting an axis should never cause a problem. The default argument (`True`) simplifies the subscript as much as possible while maintaining the splits from the original input arrays. If your inputs are contiguous, you can safely use `"max"`.
```

